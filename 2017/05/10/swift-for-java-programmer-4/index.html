<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/my-blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/my-blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/my-blog/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Swift," />








  <link rel="shortcut icon" type="image/x-icon" href="/my-blog/favicon.ico?v=5.1.0" />






<meta name="description" content="Let’s focus on Pattern matching, a powerful language feature in Swift. When I first saw this in blogs or articles, I felt confused and even complained about why people added this into Swift so that mo">
<meta name="keywords" content="Swift">
<meta property="og:type" content="article">
<meta property="og:title" content="Swift For Java Programmer 4">
<meta property="og:url" content="https://sevenbamboos.github.com/2017/05/10/swift-for-java-programmer-4/index.html">
<meta property="og:site_name" content="Sam&#39;s Chest of Drawers">
<meta property="og:description" content="Let’s focus on Pattern matching, a powerful language feature in Swift. When I first saw this in blogs or articles, I felt confused and even complained about why people added this into Swift so that mo">
<meta property="og:updated_time" content="2017-05-11T14:50:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Swift For Java Programmer 4">
<meta name="twitter:description" content="Let’s focus on Pattern matching, a powerful language feature in Swift. When I first saw this in blogs or articles, I felt confused and even complained about why people added this into Swift so that mo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/my-blog/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://sevenbamboos.github.com/2017/05/10/swift-for-java-programmer-4/"/>





  <title> Swift For Java Programmer 4 | Sam's Chest of Drawers </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/my-blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sam's Chest of Drawers</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Thinking about Programming and Lifestyle</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/my-blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/my-blog/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/my-blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/my-blog/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://sevenbamboos.github.com/my-blog/2017/05/10/swift-for-java-programmer-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuping Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://s.gravatar.com/avatar/67a6b6bab2f6f4fb0f035c398789a241?s=80">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sam's Chest of Drawers">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Swift For Java Programmer 4
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-10T21:27:08+12:00">
                05-10-2017
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/my-blog/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">Programming</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Let’s focus on Pattern matching, a powerful language feature in Swift. When I first saw this in blogs or articles, I felt confused and even complained about why people added this into Swift so that more often than not there are more than one way to achieve the same thing. For programmers from other world (like Java), it’s hard to accept since most of them believe in the principle that simplicity is beauty. </p>
<blockquote>
<p>I find this <a href="http://alisoftware.github.io/swift/pattern-matching/2016/03/27/pattern-matching-1/" target="_blank" rel="external">tutorial</a> very helpful and use an <a href="https://iswift.org/playground" target="_blank" rel="external">online Swift runner</a> due to the lack of Swift compiler implementation on Windows. Note this is the only runner that supports Foundations.</p>
<p>Edited on [May 11, 2017]: another thorough <a href="https://appventure.me/2015/08/20/swift-pattern-matching-in-detail/" target="_blank" rel="external">tutorial</a></p>
</blockquote>
<a id="more"></a>
<h1 id="switch-and-enum"><a href="#switch-and-enum" class="headerlink" title="switch and enum"></a>switch and enum</h1><p>Generally, any <code>case ...</code> belongs to the scope of pattern matching. But a good starting point is <code>switch</code> and <code>enum</code>.</p>
<blockquote>
<p>Note how I bind constant inside a case and use it in where clause as well as case handling code.</p>
</blockquote>
<pre><code>enum Gender {
    case male, female
}

enum Person {
    case patient(pid: String, gender: Gender, age: Int)
    case physician(name: String, mail: String)
    case user(loginID: String, role: String)
}

extension Person : CustomStringConvertible {
    var description: String {
        switch self {
        case .patient(pid: let pid, gender: _, age: let age)
            where age &lt; 18:
            return &quot;Junior \(pid)&quot;
        case .patient(pid: let pid, gender: _, age: let age)
            where age &gt; 60:
            return &quot;Elder \(pid)&quot;            
        case .patient(pid: let pid, gender: let gender, age: _)
            where gender == Gender.male:
            return &quot;Mr. \(pid)&quot;
        case .patient(pid: let pid, gender: let gender, age: _)
            where gender == Gender.female:
            return &quot;Ms. \(pid)&quot;    
        case .physician(name: let name, mail: _):
            return &quot;Dr. \(name)&quot;
        case .user(loginID: let loginID, role: _):
            return &quot;User \(loginID)&quot;
        default: // Not sure why the compiler needs this. In my view, the above cases should be exhausted.
            return &quot;Unknown&quot;
        }
    }
}
</code></pre><p>Not sure why the compiler doesn’t allow me to omit the verbose label or make use of tuple like this:</p>
<pre><code>switch self {
case .patient(tuple):
    return tuple.pid
case .physician(tuple):
    return tuple.name
case .user(tuple):
    return tuple.loginID
}
</code></pre><h1 id="switch-and-tuple-switch-and-range"><a href="#switch-and-tuple-switch-and-range" class="headerlink" title="switch and tuple, switch and range"></a>switch and tuple, switch and range</h1><p>Pattern matching also works well with tuple and range (the magic for range is <code>~=</code> operator):</p>
<blockquote>
<p>Note how to use more than one condition in where clause (the first case) and how to avoid the binding (the second case)</p>
</blockquote>
<pre><code>struct Person {
    var age: Int
    let gender: Gender
}

extension Person : CustomStringConvertible {
    var description: String {
        switch (self.age, self.gender) {
        case (0..&lt;18, let gender) where age &lt; 18 &amp;&amp; gender == Gender.female:
            return &quot;Junior&quot;
        case (let age, Gender.male) where age &gt; 60:
            return &quot;OhGiGi&quot;
        case (18...30, _):
            return &quot;Somebody&quot;
        default:
            return &quot;Nobody&quot;
        }
    }
}
</code></pre><h1 id="switch-and-optional"><a href="#switch-and-optional" class="headerlink" title="switch and optional"></a>switch and optional</h1><pre><code>enum Gender: Int {
    case male, female
}

let input: Int = 2

switch Gender(rawValue: input) {
    case .male?:
        print(&quot;M&quot;)
    case .female?:
        print(&quot;F&quot;)
    default:
        print(&quot;U&quot;)
}
</code></pre><p>But in my view, it’s more readable to eliminate the optional with optional binding like this:</p>
<pre><code>func printGender(input: Int) {
    guard let gender = Gender(rawValue: input) else {
        print(&quot;U&quot;)
        return
    }

    switch gender {
    case .male:
        print(&quot;M&quot;)
    case .female:
        print(&quot;F&quot;)
    }
}
</code></pre><h1 id="if-case-let-where"><a href="#if-case-let-where" class="headerlink" title="if case let where"></a>if case let where</h1><p>Now it’s time to broad the scope from switch to other statement: if/guard/for.</p>
<blockquote>
<p>Note that <code>for case let ... in ... where</code> can also be written as <code>for ... in ... where</code>. Another example that we can do the same thing in more than one way. Personally, I’m not very in this style though.</p>
</blockquote>
<pre><code>enum HTTPResponse {
    case returnCode(code: Int)
    case error(message: String)
}

func fetch(res: HTTPResponse) {
    if case let HTTPResponse.returnCode(code) = res, 200..&lt;300 ~= code {
        print(&quot;Return code:\(code)&quot;)
    } else if case let HTTPResponse.returnCode(code) = res, code &gt;= 400 {
        print(&quot;Error code:\(code)&quot;)        
    } else if case let HTTPResponse.error(msg) = res {
        print(&quot;Error:\(msg)&quot;)
    } else {
        print(&quot;Unknown&quot;)
    }
} 
</code></pre><p>Basically, these items wrap up the pattern matching topic in Swift. And I also want to conclude the series of introduction to Swift.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/my-blog/tags/Swift/" rel="tag"># Swift</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/my-blog/2017/05/09/swift-for-java-programmer-3/" rel="next" title="Swift For Java Programmer 3">
                <i class="fa fa-chevron-left"></i> Swift For Java Programmer 3
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/my-blog/2017/05/15/mvx/" rel="prev" title="MVC, MVP, MVVM and Redux">
                MVC, MVP, MVVM and Redux <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://s.gravatar.com/avatar/67a6b6bab2f6f4fb0f035c398789a241?s=80"
               alt="Yuping Wang" />
          <p class="site-author-name" itemprop="name">Yuping Wang</p>
           
              <p class="site-description motion-element" itemprop="description">85608565</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/my-blog/archives">
                <span class="site-state-item-count">41</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/my-blog/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/my-blog/tags">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sevenbamboos" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/sevenbamboos" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#switch-and-enum"><span class="nav-number">1.</span> <span class="nav-text">switch and enum</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#switch-and-tuple-switch-and-range"><span class="nav-number">2.</span> <span class="nav-text">switch and tuple, switch and range</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#switch-and-optional"><span class="nav-number">3.</span> <span class="nav-text">switch and optional</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#if-case-let-where"><span class="nav-number">4.</span> <span class="nav-text">if case let where</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuping Wang</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/my-blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/my-blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/my-blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/my-blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/my-blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/my-blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/my-blog/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/my-blog/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/my-blog/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/my-blog/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/my-blog/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
